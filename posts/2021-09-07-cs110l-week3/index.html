<!doctype html><html>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>CS110L Week 3 - Justin Lei</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta itemprop=name content="CS110L Week 3">
<meta itemprop=description content="Processes! ğŸ•¶ï¸Big brother is watching you!"><meta itemprop=datePublished content="2021-09-07T21:15:25+08:00">
<meta itemprop=dateModified content="2021-09-07T21:15:25+08:00">
<meta itemprop=wordCount content="503">
<meta itemprop=keywords content="Rust,CS110L,"><meta property="og:title" content="CS110L Week 3">
<meta property="og:description" content="Processes! ğŸ•¶ï¸Big brother is watching you!">
<meta property="og:type" content="article">
<meta property="og:url" content="https://lza852.com/posts/2021-09-07-cs110l-week3/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-09-07T21:15:25+08:00">
<meta property="article:modified_time" content="2021-09-07T21:15:25+08:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="CS110L Week 3">
<meta name=twitter:description content="Processes! ğŸ•¶ï¸Big brother is watching you!">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700" rel=stylesheet type=text/css>
<link rel=stylesheet type=text/css media=screen href=https://lza852.com/css/normalize.css>
<link rel=stylesheet type=text/css media=screen href=https://lza852.com/css/main.css>
<link id=dark-scheme rel=stylesheet type=text/css href=https://lza852.com/css/dark.css>
<script src=https://lza852.com/js/feather.min.js></script>
<script src=https://lza852.com/js/main.js></script>
</head><body>
<div class="container wrapper">
<div class=header>
<div class=avatar>
<a href=https://lza852.com/>
<img src=https://avatars.githubusercontent.com/u/20857777 alt="Justin Lei">
</a>
</div><h1 class=site-title><a href=https://lza852.com/>Justin Lei</a></h1><div class=site-description><p>Study forever</p><nav class="nav social">
<ul class=flat><li><a href=https://github.com/zianglei title=Github><i data-feather=github></i></a></li></ul></nav></div><nav class=nav>
<ul class=flat>
</ul></nav></div><div class=post>
<div class=post-header>
<div class=meta>
<div class=date>
<span class=day>07</span>
<span class=rest>Sep 2021</span>
</div></div><div class=matter>
<h1 class=title>CS110L Week 3</h1></div></div><div>
<nav id=TableOfContents>
<ul>
<li><a href=#part-1>Part 1</a>
<ul>
<li><a href=#æ‰¾åˆ°ä¸€ä¸ªè¿›ç¨‹æ‰“å¼€çš„æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦>æ‰¾åˆ°ä¸€ä¸ªè¿›ç¨‹æ‰“å¼€çš„æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦</a></li><li><a href=#è¯»å–æ–‡ä»¶æè¿°ç¬¦ä¿¡æ¯>è¯»å–æ–‡ä»¶æè¿°ç¬¦ä¿¡æ¯</a></li></ul></li><li><a href=#part-2>Part 2</a>
<ul>
<li><a href=#å®ç°æ³›å½¢>å®ç°æ³›å½¢</a></li><li><a href=#å®ç°-clone-trait>å®ç° Clone trait</a></li><li><a href=#å®ç°-partialeq-trait>å®ç° PartialEq trait</a></li><li><a href=#å®ç°-iteratorintoiterator-trait>å®ç° Iterator/IntoIterator trait</a></li></ul></li></ul></nav></div><hr>
<div class=markdown>
<h2 id=part-1>Part 1</h2><p>ä½¿ç”¨ Rust å®ç°ä¸€ä¸ªå°å·¥å…· inspect-fdsï¼ŒæŸ¥çœ‹è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ä¿¡æ¯ã€‚</p><h3 id=æ‰¾åˆ°ä¸€ä¸ªè¿›ç¨‹æ‰“å¼€çš„æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦>æ‰¾åˆ°ä¸€ä¸ªè¿›ç¨‹æ‰“å¼€çš„æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦</h3><p>ä¸€ä¸ªè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦å­˜æ”¾åœ¨ <code>/proc/$pid/fd</code> æ–‡ä»¶å¤¹ä¸‹ã€‚</p><p>å› æ­¤ä½¿ç”¨ std::fs::read_dir éå†å½“å‰è·¯å¾„ï¼Œç”±äºè¦æ±‚ list_fds å‡½æ•°è¿”å› Option&lt;Vec&lt;usize&#187;ï¼Œä½†æ˜¯ std::fs::read_dir è¿”å›çš„æ˜¯ Resultï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Result.ok()? å°† Result è½¬æ¢ä¸º Optionï¼Œå½“ Result è¿”å› Err çš„æ—¶å€™ï¼Œä¼šè½¬æ¢ä¸º None</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00f>for</span> entry <span style=color:#00f>in</span> fs::read_dir(fd_path).ok()? {
</span></span><span style=display:flex><span>     <span style=color:#00f>let</span> entry = entry.ok()?;
</span></span><span style=display:flex><span>     <span style=color:#00f>let</span> fd = entry.file_name()
</span></span><span style=display:flex><span>                .into_string().ok()?
</span></span><span style=display:flex><span>                .parse::&lt;<span style=color:#2b91af>usize</span>&gt;().ok()?;
</span></span><span style=display:flex><span>     open_fds.push(fd);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æ³¨æ„åœ¨ä½¿ç”¨ vscode remote è¿œç¨‹è¿æ¥æ—¶ï¼Œæ¯ä¸ªè¿›ç¨‹ä¼šå¤šå‡º 19 å’Œ 99 ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ŒæŸ¥çœ‹å®ƒä»¬æŒ‡å‘çš„æè¿°ç¬¦åˆ†åˆ«æ˜¯ /dev/ptmx å’Œ vscode remote åˆ›å»ºçš„æ–‡ä»¶ã€‚</p><p>/dev/ptmx æ˜¯ Linux çš„ä¼ªç»ˆç«¯ï¼Œå½“æ‰“å¼€æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»º master å’Œ slaveï¼ˆslave ä½äº /dev/pts/ ä¸‹ï¼‰ï¼Œä¸ºäº†å®ç°è™šæ‹ŸåŒ–çš„ç›®æ ‡ï¼Œä¼ªç»ˆç«¯æ¨¡æ‹Ÿå™¨é€šè¿‡masterå‘é€é”®ç›˜è¾“å…¥ï¼Œbash ç­‰ç»ˆç«¯è¿›ç¨‹é€šè¿‡ slave æ¥æ”¶ï¼Œç„¶åå°†æ‰§è¡Œç»“æœé€šè¿‡ slave å‘é€ï¼Œä¼ªç»ˆç«¯æ¨¡æ‹Ÿå™¨é€šè¿‡ master æ¥æ”¶å¤„ç†ç»“æœï¼Œæ˜¾ç¤ºåˆ°æ˜¾ç¤ºå™¨ä¸Šã€‚</p><h3 id=è¯»å–æ–‡ä»¶æè¿°ç¬¦ä¿¡æ¯>è¯»å–æ–‡ä»¶æè¿°ç¬¦ä¿¡æ¯</h3><p>ç”±äº /proc/$pid/fd ä¸‹æ‰€æœ‰çš„æ–‡ä»¶éƒ½æ˜¯è½¯é“¾æ¥ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ <code>fs::read_link</code> è·å–æ–‡ä»¶æè¿°ç¬¦æŒ‡å‘çš„çœŸå®çš„æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ <code>fs::read_to_string</code> è¯»å– /proc/$pid/fdinfo/$fd ä¸‹çš„ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–ä¿¡æ¯å³å¯å¾—åˆ°æ–‡ä»¶æè¿°ç¬¦çš„ AccessModeã€Cursorã€‚</p><p>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00f>let</span> re = Regex::new(<span style=color:#a31515>r&#34;pos:\s*(\d+)&#34;</span>).unwrap();
</span></span><span style=display:flex><span>Some(
</span></span><span style=display:flex><span>    re.captures(fdinfo)?
</span></span><span style=display:flex><span>        .get(1)?
</span></span><span style=display:flex><span>        .as_str()
</span></span><span style=display:flex><span>        .parse::&lt;<span style=color:#2b91af>usize</span>&gt;()
</span></span><span style=display:flex><span>        .ok()?,
</span></span><span style=display:flex><span>    )
</span></span></code></pre></div><h2 id=part-2>Part 2</h2><p>å®ç°ä¸€ä¸ªé€šç”¨çš„é“¾è¡¨ï¼Œç»ƒä¹ æ³›å‹å’Œ trait çš„ç”¨æ³•</p><p>Box&lt;T> è¡¨ç¤ºåœ¨å †ä¸Šä¸ºå¯¹è±¡åˆ†é…å†…å­˜ï¼Œè¿”å›æŒ‡å‘å†…å­˜çš„æŒ‡é’ˆ</p><h3 id=å®ç°æ³›å½¢>å®ç°æ³›å½¢</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00f>impl</span>&lt;T&gt; LinkedList&lt;T&gt; {
</span></span><span style=display:flex><span>    head: Option&lt;Box&lt;Node&lt;T&gt;&gt;&gt;,
</span></span><span style=display:flex><span>    size: <span style=color:#2b91af>usize</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=å®ç°-clone-trait>å®ç° Clone trait</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00f>impl</span>&lt;T: Clone&gt; Clone <span style=color:#00f>for</span> Node&lt;T&gt; {
</span></span><span style=display:flex><span>    <span style=color:#00f>fn</span> clone(&amp;self) -&gt; <span style=color:#2b91af>Self</span> {
</span></span><span style=display:flex><span>        <span style=color:green>// next ä¼šè‡ªåŠ¨å…‹éš†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
</span></span></span><span style=display:flex><span><span style=color:green></span>        Node { value: <span style=color:#2b91af>self</span>.value.clone(), next: <span style=color:#2b91af>self</span>.next.clone() }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=å®ç°-partialeq-trait>å®ç° PartialEq trait</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00f>impl</span>&lt;T: PartialEq&gt; PartialEq <span style=color:#00f>for</span> LinkedList&lt;T&gt; {
</span></span><span style=display:flex><span>    <span style=color:#00f>fn</span> eq(&amp;self, rhs: <span style=color:#00f>&amp;</span><span style=color:#2b91af>LinkedList</span>&lt;T&gt;) -&gt; <span style=color:#2b91af>bool</span> {
</span></span><span style=display:flex><span>        <span style=color:#00f>if</span> self.size != rhs.size {
</span></span><span style=display:flex><span>            <span style=color:#00f>return</span> <span style=color:#00f>false</span>;
</span></span><span style=display:flex><span>        } 
</span></span><span style=display:flex><span>        <span style=color:#00f>let</span> <span style=color:#00f>mut</span> l: <span style=color:#00f>&amp;</span>Option&lt;Box&lt;Node&lt;T&gt;&gt;&gt; = &amp;self.head;
</span></span><span style=display:flex><span>        <span style=color:#00f>let</span> <span style=color:#00f>mut</span> r: <span style=color:#00f>&amp;</span>Option&lt;Box&lt;Node&lt;T&gt;&gt;&gt; = &amp;rhs.head;
</span></span><span style=display:flex><span>        <span style=color:#00f>loop</span> {
</span></span><span style=display:flex><span>            <span style=color:#00f>match</span> l {
</span></span><span style=display:flex><span>                Some(node) =&gt; {
</span></span><span style=display:flex><span>                    <span style=color:green>// node ç±»å‹æ˜¯ &amp;Box&lt;Node&lt;T&gt;&gt;, r ç±»å‹æ˜¯&amp;Option&lt;Box&lt;Node&lt;T&gt;&gt;ï¼Œå¦‚æœç›´æ¥ unwrapï¼Œå¾—åˆ°çš„å°±æ˜¯ Box&lt;Node&lt;T&gt;&gt;ï¼Œä¸èƒ½åšæ¯”è¾ƒï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨ as_refï¼Œè½¬æ¢æˆ Option&lt;&amp;Box&lt;Node&lt;T&gt;&gt;ï¼Œç„¶åå† unwrap
</span></span></span><span style=display:flex><span><span style=color:green></span>                    <span style=color:#00f>let</span> rnode = r.as_ref().unwrap();
</span></span><span style=display:flex><span>                    <span style=color:#00f>if</span> *node != *rnode {
</span></span><span style=display:flex><span>                        <span style=color:#00f>return</span> <span style=color:#00f>false</span>
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                    l = &amp;node.next;
</span></span><span style=display:flex><span>                    r = &amp;rnode.next;
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>                None =&gt; <span style=color:#00f>break</span>,
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#00f>true</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æ³¨æ„æ¯”è¾ƒæ—¶å€™çš„ç±»å‹è½¬æ¢ã€‚</p><p>Option::AsRef å’Œé€šå¸¸çš„ as_ref ä¸åŒï¼Œä¼šå°† &Option&lt;T> è½¬æ¢æˆ Option&lt;&T>ï¼Œä¹Ÿå°±æ˜¯è¯´åˆšå¼€å§‹å¯¹ Option æ˜¯æ²¡æœ‰æ‰€æœ‰æƒçš„ï¼Œé€šè¿‡ as_ref è½¬æ¢æˆäº† Option&lt;&T>ï¼Œå°±æœ‰äº†æ‰€æœ‰æƒï¼Œå¯ä»¥è°ƒç”¨ unwrap è·å–é‡Œé¢çš„ T çš„å¼•ç”¨ã€‚</p><h3 id=å®ç°-iteratorintoiterator-trait>å®ç° Iterator/IntoIterator trait</h3><p>å¼•ç”¨è‡ª <a href=http://xion.io/post/code/rust-for-loop.html>è¿™ç¯‡</a> æ–‡ç« ï¼Œåœ¨ Rust ä¸­ï¼Œä¸ºäº†å®ç°éå†æ‰€æœ‰å…ƒç´ ï¼Œé€šå¸¸ä½¿ç”¨è¿­ä»£å™¨è®¿é—®å…ƒç´ ï¼Œè¿­ä»£å™¨èµ·åˆ°çš„ä½œç”¨æ˜¯è·å–å½“å‰å€¼ã€å‘å‰æŒ‡å‘ä¸‹ä¸€ä¸ªå€¼ã€å¦‚æœå…¨éƒ¨å·²ç»éå†å®Œå°±è¿”å› None</p><p>å¦‚æœä¸€ä¸ªç±»å‹å®ç°äº† Iterator traitï¼Œå°±å¯ä»¥è½¬æ¢æˆä¸€ä¸ªè¿­ä»£å™¨ï¼Œè°ƒç”¨ next æ–¹æ³•è·å¾—é›†åˆä¸­çš„å€¼</p><p>è€Œé€šå¸¸ä½¿ç”¨çš„ for loop å…¶å®æ˜¯ IntoIterator trait çš„è¯­æ³•ç³–ï¼Œå…¶ä¸­çš„ into_iter æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00f>trait</span> Iterator {
</span></span><span style=display:flex><span>  <span style=color:#00f>type</span> <span style=color:#2b91af>Item</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#00f>trait</span> IntoIterator {
</span></span><span style=display:flex><span>  <span style=color:#00f>type</span> <span style=color:#2b91af>Item</span>
</span></span><span style=display:flex><span>  <span style=color:#00f>type</span> <span style=color:#2b91af>IntoIter</span>
</span></span><span style=display:flex><span>  <span style=color:#00f>fn</span> into_iter(self) -&gt; Iterator; <span style=color:green>// å¯ä»¥çœ‹åˆ°é»˜è®¤çš„è¿­ä»£å™¨ä¼šå°†åŸæœ¬çš„é›†åˆçš„æ‰€æœ‰æƒæ¶ˆè€—æ‰ï¼Œè½¬å˜æˆä¸€ä¸ªè¿­ä»£å™¨ï¼Œå› æ­¤ for loop ä½¿ç”¨è¿‡åé›†åˆå°±ä¸èƒ½å†æ­¤è¢«ä½¿ç”¨
</span></span></span><span style=display:flex><span><span style=color:green></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>impl</span> IntoIterator <span style=color:#00f>for</span> &amp;Vec&lt;T&gt; {
</span></span><span style=display:flex><span>  <span style=color:#00f>type</span> <span style=color:#2b91af>Item</span>
</span></span><span style=display:flex><span>  <span style=color:#00f>type</span> <span style=color:#2b91af>IntoIter</span>
</span></span><span style=display:flex><span>  <span style=color:#00f>fn</span> into_iter(self) -&gt; <span style=color:#2b91af>Itearator</span>&lt;Item=&amp;T&gt; {
</span></span><span style=display:flex><span>    <span style=color:green>// è½¬æ¢æˆå¼•ç”¨è¿­ä»£å™¨
</span></span></span><span style=display:flex><span><span style=color:green></span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å¯¹äºæˆ‘ä»¬çš„ LinkedList æ¥è¯´ï¼Œä¸ºäº†å®ç°</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00f>for</span> item <span style=color:#00f>in</span> &amp;list {
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æˆ‘ä»¬éœ€è¦ä¸º &LinkedList&lt;T> å®ç° IntoIteratorï¼Œå°†å…¶è½¬æ¢æˆ LinkedListIterï¼ŒLinkedListIter éœ€è¦å®ç° Iterator traitï¼Œå¯¹é“¾è¡¨é‡Œçš„ value è¿›è¡Œå…‹éš†</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00f>pub</span> <span style=color:#00f>struct</span> <span style=color:#2b91af>LinkedListIter</span>&lt;&#39;a, T&gt; {
</span></span><span style=display:flex><span>    current: <span style=color:#00f>&amp;</span>&#39;a Option&lt;Box&lt;Node&lt;T&gt;&gt;&gt;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>impl</span>&lt;T: Clone&gt; Iterator <span style=color:#00f>for</span> LinkedListIter&lt;&#39;_, T&gt; {
</span></span><span style=display:flex><span>    <span style=color:#00f>type</span> <span style=color:#2b91af>Item</span> = T;
</span></span><span style=display:flex><span>    <span style=color:#00f>fn</span> next(&amp;<span style=color:#00f>mut</span> self) -&gt; Option&lt;T&gt; {
</span></span><span style=display:flex><span>        <span style=color:#00f>match</span> self.current {
</span></span><span style=display:flex><span>            Some(node) =&gt; {
</span></span><span style=display:flex><span>              	<span style=color:green>// æ­¤å¤„ç›´æ¥ä½¿ç”¨æ‹·è´
</span></span></span><span style=display:flex><span><span style=color:green></span>                Some(node.value.clone())
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>            None =&gt; None
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:green>// å¼•ç”¨æƒ…å†µä¸‹
</span></span></span><span style=display:flex><span><span style=color:green></span><span style=color:#00f>impl</span>&lt;&#39;a, T: Clone&gt; IntoIterator <span style=color:#00f>for</span> &amp;&#39;a LinkedList&lt;T&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>type</span> <span style=color:#2b91af>Item</span> = T;
</span></span><span style=display:flex><span>    <span style=color:#00f>type</span> <span style=color:#2b91af>IntoIter</span> = LinkedListIter&lt;&#39;a, T&gt;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fn</span> into_iter(self) -&gt; <span style=color:#2b91af>LinkedListIter</span>&lt;&#39;a, T&gt; {
</span></span><span style=display:flex><span>        LinkedListIter { current: <span style=color:#00f>&amp;</span><span style=color:#2b91af>self</span>.head }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å¦‚æœä¸ä½¿ç”¨æ‹·è´å½¢å¼ï¼Œè€Œæ˜¯ç”¨å¼•ç”¨å½¢å¼ï¼Œåˆ™å¯ä»¥æŒ‰ç…§ä¸‹é¢æ–¹æ³•å®ç°</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00f>impl</span>&lt;&#39;a, T: Clone&gt; IntoIterator <span style=color:#00f>for</span> &amp;&#39;a LinkedList&lt;T&gt; {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>type</span> <span style=color:#2b91af>Item</span> = &amp;&#39;a T; <span style=color:green>// æ­¤å¤„å˜ä¸ºå¼•ç”¨
</span></span></span><span style=display:flex><span><span style=color:green></span>    <span style=color:#00f>type</span> <span style=color:#2b91af>IntoIter</span> = LinkedListIter&lt;&#39;a, T&gt;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#00f>fn</span> into_iter(self) -&gt; <span style=color:#2b91af>LinkedListIter</span>&lt;&#39;a, T&gt; {
</span></span><span style=display:flex><span>        LinkedListIter { current: <span style=color:#00f>&amp;</span><span style=color:#2b91af>self</span>.head }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#00f>impl</span>&lt;&#39;a, T: Clone&gt; Iterator <span style=color:#00f>for</span> LinkedListIter&lt;&#39;a, T&gt; {
</span></span><span style=display:flex><span>    <span style=color:#00f>type</span> <span style=color:#2b91af>Item</span> = &amp;&#39;a T; <span style=color:green>// æ­¤å¤„å˜ä¸ºå¼•ç”¨
</span></span></span><span style=display:flex><span><span style=color:green></span>    <span style=color:#00f>fn</span> next(&amp;<span style=color:#00f>mut</span> self) -&gt; Option&lt;&amp;&#39;a T&gt; { <span style=color:green>// Option è¿”å›çš„ç±»å‹ä¸ºå¼•ç”¨å€¼
</span></span></span><span style=display:flex><span><span style=color:green></span>        <span style=color:#00f>match</span> self.current {
</span></span><span style=display:flex><span>            Some(node) =&gt; {
</span></span><span style=display:flex><span>                self.current = &amp;node.next;
</span></span><span style=display:flex><span>                Some(&amp;node.value) <span style=color:green>// è¿”å›å¼•ç”¨
</span></span></span><span style=display:flex><span><span style=color:green></span>            },
</span></span><span style=display:flex><span>            None =&gt; None
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å¦‚æœéœ€è¦å®ç°</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00f>for</span> item <span style=color:#00f>in</span> list {
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¸º LinkedList&lt;T> å®ç° Iterator</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#00f>impl</span> &lt;T: Clone&gt; Iterator <span style=color:#00f>for</span> LinkedList&lt;T&gt; {
</span></span><span style=display:flex><span>  <span style=color:#00f>type</span> <span style=color:#2b91af>Item</span>
</span></span><span style=display:flex><span>  <span style=color:#00f>fn</span> next(&amp;<span style=color:#00f>mut</span> self) -&gt; Option&lt;T&gt;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><div class=tags>
<ul class=flat>
<li><a href=/tags/rust>Rust</a></li><li><a href=/tags/cs110l>CS110L</a></li></ul></div></div></div><div class="footer wrapper">
<nav class=nav>
<div>2022 Â© Justin Lei | <a href=https://github.com/knadh/hugo-ink>Ink</a> theme on <a href=https://gohugo.io>Hugo</a></div></nav></div><script>feather.replace()</script>
</body></html>